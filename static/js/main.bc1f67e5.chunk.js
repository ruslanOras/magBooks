(this.webpackJsonpshop_mag=this.webpackJsonpshop_mag||[]).push([[0],{186:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setBooks",(function(){return b}));var c={};n.r(c),n.d(c,"addToCart",(function(){return v})),n.d(c,"setSearchQuery",(function(){return C}));var a={};n.r(a),n.d(a,"setFilter",(function(){return w})),n.d(a,"setSearchQuery",(function(){return I}));var i=n(5),s=n(0),o=n(32),u=n.n(o),j=n(26),d=(n(185),n(186),n(10)),l=n(15),b=function(e){return{type:"SET_BOOKS",payload:e}},O=n(153),h=n(154),f=n(164),p=n(161),m=n(317),x=n(155),y=n.n(x),v=function(e){return{type:"ADD_TO_CART",payload:e}},C=function(e){return{type:"REMOVE_FROM_CART",payload:e}},g=n(321),_=n(163),R=n(35),k=n(299),E=function(e){var t=e.title,n=e.author,r=e.price,c=e.image,a=e.addToCart,s=e.addedCount;return Object(i.jsxs)(g.a,{children:[Object(i.jsx)(_.a,{src:c}),Object(i.jsxs)(g.a.Content,{children:[Object(i.jsx)(g.a.Header,{children:t}),Object(i.jsx)(g.a.Meta,{children:Object(i.jsx)("span",{className:"date",children:n})})]}),Object(i.jsx)(g.a.Content,{extra:!0,children:Object(i.jsxs)("a",{children:[Object(i.jsx)(R.a,{name:"rub"}),r]})}),Object(i.jsxs)(k.a,{onClick:a.bind(undefined,e),children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443",s>0&&"(".concat(s,")")]})]})},T=Object(j.b)((function(e,t){var n=e.cart,r=t.id;return{addedCount:n.items.reduce((function(e,t){return e+(t.id===r?1:0)}),0)}}),(function(e){return Object(d.a)({},Object(l.b)(c,e))}))(E),w=function(e){return{type:"SET_FILTER",payload:e}},I=function(e){return{type:"SET_QUERY",payload:e}},S=n(319),B=n(316),Q=void 0,A=function(e){var t=e.setFilter,n=e.filterBy,r=e.searchQuery,c=e.setSearchQuery;return Object(i.jsxs)(S.a,{secondary:!0,children:[Object(i.jsx)(S.a.Item,{active:"all"===n,onClick:t.bind(Q,"all"),children:"\u0412\u0441\u0435"}),Object(i.jsx)(S.a.Item,{active:"prise_high"===n,onClick:t.bind(Q,"prise_high"),children:"\u0426\u0435\u043d\u0430 (\u0434\u043e\u0440\u043e\u0433\u0438\u0435)"}),Object(i.jsx)(S.a.Item,{active:"prise_low"===n,onClick:t.bind(Q,"prise_low"),children:"\u0426\u0435\u043d\u0430 (\u0434\u0435\u0448\u0435\u0432\u044b\u0435)"}),Object(i.jsx)(S.a.Item,{active:"author"===n,onClick:t.bind(Q,"author"),children:"\u0410\u0432\u0442\u043e\u0440"}),Object(i.jsx)(S.a.Item,{children:Object(i.jsx)(B.a,{icon:"search",onChange:function(e){return c(e.target.value)},value:r,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043d\u0438\u0433\u0430\u043c..."})})]})},F=Object(j.b)((function(e){return{filterBy:e.filter.filterBy}}),(function(e){return Object(d.a)({},Object(l.b)(a,e))}))(A),M=n(320),L=n(318),D=function(e){var t=e.title,n=e.id,r=e.image,c=e.removeFromCart;return Object(i.jsx)(M.a,{selection:!0,divided:!0,verticalAlign:"middle",children:Object(i.jsxs)(M.a.Item,{children:[Object(i.jsx)(M.a.Content,{floated:"right",children:Object(i.jsx)(k.a,{onClick:c.bind(undefined,n),color:"red",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),Object(i.jsx)(_.a,{avatar:!0,src:r}),Object(i.jsx)(M.a.Content,{children:t})]})})},P=function(e){var t=e.totalPrice,n=e.count,r=e.items;return Object(i.jsxs)(S.a,{children:[Object(i.jsx)(S.a.Item,{name:"browse",children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"}),Object(i.jsxs)(S.a.Menu,{position:"right",children:[Object(i.jsxs)(S.a.Item,{name:"signup",children:["\u0418\u0442\u043e\u0433\u043e: \xa0 ",Object(i.jsx)("b",{children:t}),"\xa0\u0433\u0440\u043d."]}),Object(i.jsx)(S.a.Item,{name:"help"}),Object(i.jsx)(L.a,{trigger:Object(i.jsxs)(S.a.Item,{name:"help",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 (",Object(i.jsx)("b",{children:n}),")"]}),content:r.map((function(e){return Object(i.jsx)(D,Object(d.a)({},e))})),on:"click",hideOnScroll:!0})]})]})},Y=n(159),J=n.n(Y),K=Object(j.b)((function(e){var t=e.cart;return{totalPrise:t.items.reduce((function(e,t){return e+t.price}),0),count:t.items.length,items:J()(t.items,(function(e){return e.id}))}}),(function(e){return Object(d.a)({},Object(l.b)(c,e))}))(P),U=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.setBooks;y.a.get("/books.json").then((function(t){var n=t.data;e(n)}))}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.isReady;return Object(i.jsxs)(m.a,{children:[Object(i.jsx)(K,{}),Object(i.jsx)(F,{}),Object(i.jsx)(g.a.Group,{itemsPerRow:4,children:n?t.map((function(e,t){return Object(i.jsx)(T,Object(d.a)({},e),t)})):"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})}}]),n}(s.Component),V=n(102),G=n.n(V),H=function(e,t,n){return function(e,t){switch(t){case"prise_high":return G()(e,"prise","desc");case"prise_low":return G()(e,"price","asc");case"author":return G()(e,"author","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,n),t)},N=Object(j.b)((function(e){var t=e.books,n=e.filter;return{books:t.items&&H(t.items,n.filterBy,n.searchQuery),isReady:t.isReady}}),(function(e){return Object(d.a)({},Object(l.b)(r,e))}))(U),W=n(160),q=n.n(W),z={isReady:!1,items:null},X=n(162),Z={items:[]},$={searchQuery:"",filterBy:"all"},ee=Object(l.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(d.a)(Object(d.a)({},e),{},{items:t.payload,isReady:!0});case"SET_IS_READY":return Object(d.a)(Object(d.a)({},e),{},{isReady:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(d.a)(Object(d.a)({},e),{},{items:[].concat(Object(X.a)(e.items),[t.payload])});case"REMOVE_FROM_CART":return Object(d.a)(Object(d.a)({},e),{},{items:e.items.filter((function(e){return e.id!=t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return Object(d.a)(Object(d.a)({},e),{},{searchQuery:t.payload});case"SET_FILTER":return Object(d.a)(Object(d.a)({},e),{},{filterBy:t.payload});default:return e}}}),te=Object(l.d)(ee,Object(l.a)(q.a));u.a.render(Object(i.jsx)(j.a,{store:te,children:Object(i.jsx)(N,{})}),document.getElementById("root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.bc1f67e5.chunk.js.map